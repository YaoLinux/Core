# Depends on: talloc tevent tdb popt lmdb python2 cmocka docbook-xsl


packager="sipo"
contributors="Tnut"
maintainer="sipo"


description="A schema-less, ldap like, API and database"
url="http://ldb.samba.org/"


name=ldb
version=1.4.3
release=2


source=(http://samba.org/ftp/${name}/${name}-${version}.tar.gz)


build(){

	cd ${SRC}/${name}-${version}

	# change to use python2
	sed -i -e "s|/usr/bin/env python$|/usr/bin/env python2|" buildtools/bin/waf
	export PYTHON=/usr/bin/python2

	./configure --prefix=/usr \
		--disable-rpath \
		--disable-rpath-install \
		--bundled-libraries=NONE \
		--builtin-libraries=replace \
                --with-modulesdir=/usr/lib/ldb/modules \
                --with-privatelibdir=/usr/lib/ldb
	make

}


package() {

	cd ${SRC}/${name}-${version}

	make DESTDIR=${PKG}/ install

}
