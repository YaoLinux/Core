# Depends on: python2 python2-setuptools


packager="sipo"
contributors="Berlius, Tnut"
maintainer="sipo"


description="C-Extensions for Python"
url="https://cython.org"


name=cython
version=0.29.5
release=1


PKGMK_KEEP_SOURCES="no"
run=(python2 python2-setuptools)


source=(https://github.com/$name/$name/archive/$version.tar.gz)


prepare(){

  cp -r cython-$version cython2-$version
  find cython2-$version -name '*.py' | xargs sed -e 's|/usr/bin/env python|/usr/bin/env python2|' -e 's|/usr/bin/python|/usr/bin/python2|' -i

}


build() {

  cd cython2-$version
  python2 setup.py build

}


package() {

  cd cython2-$version
  python2 setup.py install --root="$PKG" --skip-build

  for f in cygdb cython cythonize; do
    mv "$PKG"/usr/bin/$f "$PKG"/usr/bin/${f}2
  done

}
