makedepends=(gnutls libpcap gpgme libssh glib openldap hiredis cmake doxygen libksba)

description="The OpenVAS libraries"
url="http://www.openvas.org/"

packager="Yaolinux Team"
maintainer="rems"

name=openvas-libraries
version=9.0.1

source=(http://wald.intevation.org/frs/download.php/2420/$name-${version}.tar.gz
        http://wald.intevation.org/frs/download.php/2434/$name-${version}.tar.gz)

build() {

LDFLAGS+=" -Wl,--no-as-needed"

mkdir -pv build && cd build

cmake -DCMAKE_BUILD_TYPE=Release \
      -DCMAKE_INSTALL_PREFIX=/usr \
      -DLIBDIR=/usr/lib \
      -DSYSCONFDIR=/etc \
      -DLOCALSTATEDIR=/var ../$name-$version
make
}

package() {

make -C build DESTDIR=$PKG install

rmdir $PKG/var/run
}
