# Depends on: kerberos libxml2 openssl python libcap python-ply


packager="sipo"
contributors="Tnut"
maintainer="sipo"


description="The BIND package includes the client side programs nslookup, dig and host."
url="http://www.isc.org/downloads/bind/"


name=bind
version=9.13.7
yaolinux_version=1.0-RC1
release=2


source=(http://download.yaolinux.org/yaolinux/files/yaolinux-${yaolinux_version}.tar.xz
	https://ftp.isc.org/isc/bind/${version}/${name}-${version}.tar.gz)


run=(python-ply)


build(){

    cd $name-$version
    ./configure --prefix=/usr \
                --sysconfdir=/etc/bind \
                --disable-static \
                --mandir=/usr/share/man \
                --localstatedir=/var    \
                --with-python=/usr/bin/python3 \
                --enable-threads        \
                --with-openssl

	make -C lib/dns
	make -C lib/isc
	make -C lib/bind9
	make -C lib/isccfg
	make -C lib/irs
	make -C bin/dig

}


package(){

    cd $name-$version
	make DESTDIR=$PKG -C bin/dig install

    # doc
	install -v -m755 -d $PKG/usr/share/doc/bind-$version/{arm,misc}
	install -v -m644 doc/arm/*.html \
	$PKG/usr/share/doc/bind-$version/arm
	install -v -m644 \
	doc/misc/{dnssec,ipv6,migrat*,options,rfc-compliance,roadmap} \
	$PKG/usr/share/doc/bind-$version/misc

# Service
	cd $SRC/yaolinux-${yaolinux_version}
	make DESTDIR=$PKG install-named

}

