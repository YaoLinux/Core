makedepends=(intltool dotconf pulseaudio libao)

description="High-level device independent layer for speech synthesis interface"
url="https://devel.freebsoft.org/speechd"

packager="Yaolinux Team"

name=speech-dispatcher
version=0.9.1
release=5

PKGMK_KEEP_SOURCES="no"

source=(https://github.com/brailcom/speechd/releases/download/0.9.1/speech-dispatcher-$version.tar.gz
        speech-dispatcher.patch)

build() {

cd speech-dispatcher-$version

patch -Np1 -i ../speech-dispatcher.patch

sed -i "s/cicero //g" configure.ac
sed -i "s/sd_cicero//g" src/modules/Makefile.am

./configure --prefix=/usr \
            --libexecdir=/usr/lib/$name \
            --disable-static \
            --sysconfdir=/etc \
            --without-flite

make
make DESTDIR="$PKG" install

sed -i 's|includedir=.*|includedir=${prefix}/include/speech-dispatcher|g' "$PKG/usr/lib/pkgconfig/speech-dispatcher.pc"
}
