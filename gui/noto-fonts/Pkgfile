makedepends=(xorg-fontconfig git)

description="Google Noto TTF fonts"
url="https://www.google.com/get/noto/"

packager="Yaolinux Team"
maintainer="rems"

name=noto-fonts
version=20190926

source=(66-noto-mono.conf 66-noto-sans.conf 66-noto-serif.conf)

prepare() {

git clone https://github.com/googlefonts/noto-fonts.git $name-$version
cd $name-$version
git checkout 0fa1dfabd6e3746bb7463399e2813f60d3f1b256
}

build() {
  cd $name-$version
  mkdir -p $PKG/usr/share/fonts/noto
  install -Dm644 unhinted/Noto*/*.tt[fc] -t "$PKG"/usr/share/fonts/noto
  install -m644 hinted/Noto*/*.tt[fc] -t $PKG/usr/share/fonts/noto

  mkdir -p $PKG/usr/share/fonts/TTF
  for font in Arimo Cousine Tinos; do
    install -m644 hinted/$font/*.ttf $PKG/usr/share/fonts/TTF
  done

  # fontconfig files
  install -Dm644 ../*.conf -t $PKG/etc/fonts/conf.avail/
  install -d "$PKG"/etc/fonts/conf.d
  ln -rs "$PKG"/etc/fonts/conf.avail/* "$PKG"/etc/fonts/conf.d

  # Remove font that breaks emoji in Qt
  rm "$PKG"/usr/share/fonts/noto/NotoKufiArabic*
}
