makedepends=(libwnck3 gobject-introspection python2-lxml vala)

description="Application matching framework"
url="https://launchpad.net/bamf"

packager="Yaolinux Team"
maintainer="rems"

name=bamf
version=0.5.4
release=2

source=(https://launchpad.net/bamf/${version%.*}/$version/+download/$name-$version.tar.gz)

build() {
cd $name-$version

export PYTHON='/usr/bin/python2'
export CFLAGS+=" -Wno-deprecated-declarations"

sed -i 's/ -Werror//' configure*

 ./configure --prefix=/usr \
             --libexecdir=/usr/lib \
             --localstatedir=/var \
             --sysconfdir=/etc \
             --disable-static \
             --disable-webapps

 sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0/g' libtool

 make
 make DESTDIR=$PKG install
}
